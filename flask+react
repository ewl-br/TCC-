from senha import API_KEY
from flask import Flask, jsonify,request, render_template_string, redirect, url_for, session
from openai import OpenAI
from flask_cors import CORS

client = OpenAI(api_key=API_KEY)
app = Flask(__name__)
from openai import OpenAI
from senha import API_KEY

client = OpenAI(api_key=API_KEY)

@app.route("/gerar_agenda", methods=["POST"])
def gerar_agenda():
    data = request.get_json()
    perguntas = data.get("perguntas", [])
    
    messages = [{"role": "user", "content": "Organize uma agenda baseada nestes assuntos: " + ", ".join(perguntas)}]
    
    completion = client.chat.completions.create(
        model="gpt-5",
        messages=messages
    )
    
    resposta = completion.choices[0].message.content
    return jsonify({"agenda": resposta})
